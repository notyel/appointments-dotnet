@model IEnumerable<DateTime>
@{
    ViewData["Title"] = "Seleccione Horario";
    var selectedDate = (DateTime)ViewBag.SelectedDate;
}

<h2>Disponibilidad para @selectedDate.ToShortDateString()</h2>

<form method="get" asp-action="Slots">
    <input type="hidden" name="branchId" value="@ViewBag.BranchId" />
    <input type="hidden" name="branchServiceId" value="@ViewBag.BranchServiceId" />
    <input type="hidden" name="professionalId" value="@ViewBag.ProfessionalId" />
    <div class="form-group">
        <label>Cambiar Fecha:</label>
        <input type="date" name="date" value="@selectedDate.ToString("yyyy-MM-dd")" onchange="this.form.submit()" min="@DateTime.Today.ToString("yyyy-MM-dd")" />
    </div>
</form>

<div class="slot-grid">
    @if (!Model.Any())
    {
        <p>No hay turnos disponibles para este d√≠a.</p>
    }
    @foreach (var slot in Model)
    {
        <a asp-controller="Booking" asp-action="Create"
           asp-route-branchId="@ViewBag.BranchId"
           asp-route-branchServiceId="@ViewBag.BranchServiceId"
           asp-route-professionalId="@ViewBag.ProfessionalId"
           asp-route-startTime="@slot.ToString("yyyy-MM-ddTHH:mm:ss")"
           class="slot-btn">@slot.ToString("HH:mm")</a>
    }
</div>

<div style="margin-top: 2rem;">
    <a asp-controller="Booking" asp-action="Professionals"
       asp-route-branchId="@ViewBag.BranchId"
       asp-route-branchServiceId="@ViewBag.BranchServiceId"
       class="btn btn-secondary">Volver a Especialistas</a>
</div>
